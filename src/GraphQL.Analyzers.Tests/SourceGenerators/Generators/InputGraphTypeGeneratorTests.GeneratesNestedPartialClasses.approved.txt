// <auto-generated/>
#nullable enable

namespace AotSample;

public partial class OuterClass
{
    internal partial class InnerClass
    {
        public partial class DeepestClass
        {
            private class AutoInputGraphType_AddressInput : global::GraphQL.Types.Aot.AotAutoRegisteringInputObjectGraphType<global::Sample.AddressInput>
            {
                private static AutoInputGraphType_AddressInput? _cache;
                private static readonly global::System.Reflection.MemberInfo[] _members;
                private readonly global::GraphQL.Types.FieldType[] _fields;

                static AutoInputGraphType_AddressInput()
                {
                    _members = [
                        typeof(global::Sample.AddressInput).GetProperty(nameof(global::Sample.AddressInput.Street))!,
                        typeof(global::Sample.AddressInput).GetProperty(nameof(global::Sample.AddressInput.City))!
                    ];
                }

                public AutoInputGraphType_AddressInput() : this(_cache)
                {
                }

                private AutoInputGraphType_AddressInput(AutoInputGraphType_AddressInput? cloneFrom) : base(cloneFrom)
                {
                    if (cloneFrom != null)
                    {
                        _fields = global::System.Linq.Enumerable.ToArray(cloneFrom.Fields);
                        return;
                    }

                    _fields = global::System.Linq.Enumerable.ToArray(ProvideFields());
                    foreach (var fieldType in _fields)
                    {
                        AddField(fieldType);
                    }

                    if (global::GraphQL.GlobalSwitches.EnableReflectionCaching)
                    {
                        _cache = new AutoInputGraphType_AddressInput(this);
                    }
                }

                protected override global::System.Collections.Generic.IEnumerable<global::System.Reflection.MemberInfo> GetRegisteredMembers() => _members;

                public override object ParseDictionary(global::System.Collections.Generic.IDictionary<string, object?> value, global::GraphQL.IValueConverter valueConverter)
                {
                    return new global::Sample.AddressInput
                    {
                        Street = ParseField<string>(_fields[0]),
                        City = ParseField<string>(_fields[1])
                    };

                    TFieldType ParseField<TFieldType>(global::GraphQL.Types.FieldType fieldType)
                    {
                        if (value.TryGetValue(fieldType.Name, out var fieldValue))
                        {
                            return (TFieldType)global::GraphQL.ValueConverterExtensions.GetPropertyValue(valueConverter, fieldValue, typeof(TFieldType), fieldType.ResolvedType!)!;
                        }
                        return default!;
                    }
                }

                public override bool IsValidDefault(object value)
                {
                    if (value is not global::Sample.AddressInput obj)
                        return false;

                    if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[0].ResolvedType!, obj.Street))
                        return false;
                    if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[1].ResolvedType!, obj.City))
                        return false;

                    return true;
                }

                public override global::GraphQLParser.AST.GraphQLValue ToAST(object? value)
                {
                    if (value == null)
                        return new global::GraphQLParser.AST.GraphQLNullValue();

                    if (value is not global::Sample.AddressInput obj)
                        return null!; //allowed return to indicate failure

                    var objectValue = new global::GraphQLParser.AST.GraphQLObjectValue
                    {
                        Fields = new(_fields.Length)
                    };

                    ProcessField(_fields[0], obj.Street);
                    ProcessField(_fields[1], obj.City);

                    return objectValue;

                    void ProcessField(global::GraphQL.Types.FieldType fieldType, object? fieldValue)
                    {
                        var ast = global::GraphQL.GraphQLExtensions.ToAST(fieldType.ResolvedType!, fieldValue)
                            ?? throw new global::System.InvalidOperationException($"Could not convert value in global::Sample.AddressInput.{fieldType.Name} to AST");
                        if (ast is not global::GraphQLParser.AST.GraphQLNullValue || fieldType.DefaultValue != null)
                            objectValue.Fields.Add(new(new(fieldType.Name), ast));
                    }
                }
            }
        }
    }
}
