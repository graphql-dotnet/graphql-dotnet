// <auto-generated/>
#nullable enable

namespace AotSample;

public partial class SampleAotSchema
{
    private class AutoInputGraphType_ComplexInput : global::GraphQL.Types.Aot.AotAutoRegisteringInputObjectGraphType<global::Sample.ComplexInput>
    {
        private static AutoInputGraphType_ComplexInput? _cache;
        private static readonly global::System.Reflection.MemberInfo[] _members;
        private readonly global::GraphQL.Types.FieldType[] _fields;

        static AutoInputGraphType_ComplexInput()
        {
            _members = [
                typeof(global::Sample.ComplexInput).GetProperty(nameof(global::Sample.ComplexInput.Id))!,
                typeof(global::Sample.ComplexInput).GetProperty(nameof(global::Sample.ComplexInput.Name))!,
                typeof(global::Sample.ComplexInput).GetProperty(nameof(global::Sample.ComplexInput.Description))!,
                typeof(global::Sample.ComplexInput).GetProperty(nameof(global::Sample.ComplexInput.Tags))!,
                typeof(global::Sample.ComplexInput).GetProperty(nameof(global::Sample.ComplexInput.Metadata))!
            ];
        }

        public AutoInputGraphType_ComplexInput() : this(_cache)
        {
        }

        private AutoInputGraphType_ComplexInput(AutoInputGraphType_ComplexInput? cloneFrom) : base(cloneFrom)
        {
            if (cloneFrom != null)
            {
                _fields = global::System.Linq.Enumerable.ToArray(cloneFrom.Fields);
                return;
            }

            _fields = global::System.Linq.Enumerable.ToArray(ProvideFields());
            foreach (var fieldType in _fields)
            {
                AddField(fieldType);
            }

            if (global::GraphQL.GlobalSwitches.EnableReflectionCaching)
            {
                _cache = new AutoInputGraphType_ComplexInput(this);
            }
        }

        protected override global::System.Collections.Generic.IEnumerable<global::System.Reflection.MemberInfo> GetRegisteredMembers() => _members;

        public override object ParseDictionary(global::System.Collections.Generic.IDictionary<string, object?> value, global::GraphQL.IValueConverter valueConverter)
        {
            return new global::Sample.ComplexInput
            {
                Id = ParseField<int>(_fields[0]),
                Name = ParseField<string>(_fields[1]),
                Description = ParseField<string?>(_fields[2]),
                Tags = ParseField<global::System.Collections.Generic.List<string>?>(_fields[3]),
                Metadata = ParseField<global::System.Collections.Generic.Dictionary<string, object>?>(_fields[4])
            };

            TFieldType ParseField<TFieldType>(global::GraphQL.Types.FieldType fieldType)
            {
                if (value.TryGetValue(fieldType.Name, out var fieldValue))
                {
                    return (TFieldType)global::GraphQL.ValueConverterExtensions.GetPropertyValue(valueConverter, fieldValue, typeof(TFieldType), fieldType.ResolvedType!)!;
                }
                return default!;
            }
        }

        public override bool IsValidDefault(object value)
        {
            if (value is not global::Sample.ComplexInput obj)
                return false;

            if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[0].ResolvedType!, obj.Id))
                return false;
            if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[1].ResolvedType!, obj.Name))
                return false;
            if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[2].ResolvedType!, obj.Description))
                return false;
            if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[3].ResolvedType!, obj.Tags))
                return false;
            if (global::GraphQL.GraphQLExtensions.IsValidDefault(_fields[4].ResolvedType!, obj.Metadata))
                return false;

            return true;
        }

        public override global::GraphQLParser.AST.GraphQLValue ToAST(object? value)
        {
            if (value == null)
                return new global::GraphQLParser.AST.GraphQLNullValue();

            if (value is not global::Sample.ComplexInput obj)
                return null!; //allowed return to indicate failure

            var objectValue = new global::GraphQLParser.AST.GraphQLObjectValue
            {
                Fields = new(_fields.Length)
            };

            ProcessField(_fields[0], obj.Id);
            ProcessField(_fields[1], obj.Name);
            ProcessField(_fields[2], obj.Description);
            ProcessField(_fields[3], obj.Tags);
            ProcessField(_fields[4], obj.Metadata);

            return objectValue;

            void ProcessField(global::GraphQL.Types.FieldType fieldType, object? fieldValue)
            {
                var ast = global::GraphQL.GraphQLExtensions.ToAST(fieldType.ResolvedType!, fieldValue)
                    ?? throw new global::System.InvalidOperationException($"Could not convert value in global::Sample.ComplexInput.{fieldType.Name} to AST");
                if (ast is not global::GraphQLParser.AST.GraphQLNullValue || fieldType.DefaultValue != null)
                    objectValue.Fields.Add(new(new(fieldType.Name), ast));
            }
        }
    }
}
