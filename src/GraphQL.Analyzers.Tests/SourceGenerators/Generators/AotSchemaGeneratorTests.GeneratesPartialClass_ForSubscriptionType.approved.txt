// SUCCESS:

// ========= MySchema_SubscriptionGraphType.g.cs ============

// <auto-generated/>
#nullable enable

namespace Sample;

public partial class MySchema
{
    private class SubscriptionGraphType : global::GraphQL.Types.Aot.AotAutoRegisteringObjectGraphType<global::Sample.Subscription>
    {
        private static SubscriptionGraphType? _cache;
        private static readonly global::System.Collections.Generic.Dictionary<global::System.Reflection.MemberInfo, global::System.Action<global::GraphQL.Types.FieldType, global::System.Reflection.MemberInfo>> _members;
        private static readonly global::System.Func<global::GraphQL.IResolveFieldContext, global::Sample.Subscription> _getMemberInstance;

        static SubscriptionGraphType()
        {
            _getMemberInstance = GetMemberInstanceFromSource;

            _members = new()
            {
                { typeof(global::Sample.Subscription).GetMethod(nameof(global::Sample.Subscription.OnMessage), [])!, ConstructField0_OnMessage },
            };
        }

        public SubscriptionGraphType() : this(_cache)
        {
        }

        private SubscriptionGraphType(SubscriptionGraphType? cloneFrom) : base(cloneFrom)
        {
            if (cloneFrom != null)
            {
                return;
            }

            foreach (var fieldType in ProvideFields())
            {
                AddField(fieldType);
            }

            if (global::GraphQL.GlobalSwitches.EnableReflectionCaching)
            {
                _cache = new SubscriptionGraphType(this);
            }
        }

        protected override global::System.Collections.Generic.IEnumerable<global::System.Reflection.MemberInfo> GetRegisteredMembers() => _members.Keys;
        protected override void BuildFieldType(global::GraphQL.Types.FieldType fieldType, global::System.Reflection.MemberInfo memberInfo)
        {
            _members[memberInfo](fieldType, memberInfo);
        }

        protected static global::Sample.Subscription GetMemberInstance(global::GraphQL.IResolveFieldContext context) => _getMemberInstance(context);

        public static void ConstructField0_OnMessage(global::GraphQL.Types.FieldType fieldType, global::System.Reflection.MemberInfo memberInfo)
        {
            fieldType.Resolver = global::GraphQL.Resolvers.SourceFieldResolver.Instance;
            fieldType.StreamResolver = BuildSourceStreamResolver(context =>
            {
                var source = GetMemberInstance(context);
                return source.OnMessage();
            });
        }

    }
}


// ========= MySchema.g.cs ============

// <auto-generated/>
#nullable enable

namespace Sample;

public partial class MySchema
{
    [global::GraphQL.GraphQLConstructor]
    public MySchema(global::System.IServiceProvider services, global::System.Collections.Generic.IEnumerable<global::GraphQL.DI.IConfigureSchema> configurations) : base(services, configurations)
    {
        Configure();
    }

    protected override void Configure()
    {
        AddAotType<global::GraphQL.Types.AutoRegisteringObjectGraphType<global::Sample.Subscription>, SubscriptionGraphType>();
        AddAotType<global::GraphQL.Types.StringGraphType>();

        RegisterType(typeof(global::GraphQL.Types.AutoRegisteringObjectGraphType<global::Sample.Subscription>));
        RegisterType(typeof(global::GraphQL.Types.StringGraphType));

        RegisterTypeMapping(typeof(global::Sample.Subscription), typeof(global::GraphQL.Types.AutoRegisteringObjectGraphType<global::Sample.Subscription>));
        RegisterTypeMapping(typeof(string), typeof(global::GraphQL.Types.StringGraphType));

        Subscription = GetRequiredService<global::GraphQL.Types.AutoRegisteringObjectGraphType<global::Sample.Subscription>>();

    }
}
